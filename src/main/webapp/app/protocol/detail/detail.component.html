<div class="detail">
  <sec-loading class="loading" *ngIf="isLoading"></sec-loading>

  <div class="row col-12 col-lg-8" *ngIf="!isLoading">
    <div class="protocol-image col-12 col-md-6">
      <div class="proto">
        <div class="message mb-2 mb-md-4">
          {{ 'global.detail.message' | translate }}
        </div>
        <div class="price mt-2 mb-2 mt-md-3 mb-md-3">
          <span>{{ protocol.price }} € </span>
        </div>
        <div class="name">
          <h1 class="title">{{ protocol.name }}</h1>
        </div>

        <!-- <div class="avis">
          <ngbd-rating-decimal></ngbd-rating-decimal>
        </div> -->

        <div class="addToPanier">
          <button class="btn btn-primary" (click)="addProtocolToCart(protocol)">
            {{ 'global.detail.panier' | translate }}
          </button>
        </div>
      </div>
      <img [src]="imagePath" class="proto-image" />
    </div>

    <div class="protocol-info col-12 col-md-6">
      <!-- <div class="cat">
        <span class="cat"> {{ 'global.detail.categories' | translate | uppercase }} : </span>
        <span class="cat-name" *ngFor="let cat of protocol.categoryDTOs">
          {{ cat.name }}
        </span>
      </div> -->
      <div class="short-desc">
        <div class="label">
          <span> {{ 'global.detail.shortDescription' | translate }} : </span>
        </div>
        <div class="text">
          <span [innerHTML]="protocol.shortDescription"></span>
        </div>
      </div>
      <hr />
      <div class="prods">
        <div class="label">
          <span>
            {{ 'global.detail.product.label' | translate }}
          </span>
        </div>
        <div class="products">
          <div class="product col-6" *ngFor="let product of protocol.productDTOs">
            <div class="prod">
              <div class="image">
                <!-- <div class="avis">
                <svg xmlns="http://www.w3.org/2000/svg" fill="#f8ce0b" height="1em" viewBox="0 0 576 512">
                  <path
                    d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z">
                  </path>
                </svg>
                <span class="avis-text">{{ rating | number: '1.1-1' }}</span>
              </div> -->
                <img [src]="getProductImage(product)" alt="product.name" />
              </div>
              <div class="name">
                <span>
                  {{ product.name }}
                </span>
              </div>
              <div class="cart-price">
                <div class="price">
                  <span>{{ product.price }} € </span>
                </div>
                <div class="cart">
                  <button class="btn btn-primary" (click)="addProductToCart(product)">
                    <span class="detail-icon cart-icon"></span>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <hr />
      <div class="desc">
        <div class="label">
          <span>
            {{ 'global.detail.description' | translate }}
          </span>
        </div>
        <div class="text">
          <span [innerHTML]="protocol.description"></span>
        </div>
      </div>
    </div>
  </div>
</div>

<app-toasts aria-live="polite" aria-atomic="true"></app-toasts>
